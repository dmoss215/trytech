<div class="container manager-container">

    {{#if errors}} {{#each errors}}
    <div class="alert alert-danger">{{msg}}</div>
    {{/each}} {{/if}}

    <row class="row">

        <div class="col-md-8">

            <div id="product-display-all">

                <br />
                <h2 class="page-header">Product inventory</h2>

                <br />
                <p>
                    <strong>Displaying available products by category</strong>
                </p>
                <hr>

                <table id="inventory-table">
                    {{#each products}}

                    <tr>
                        <td>Product id: </td>
                        <td>{{this.id}}</td>
                        <td></td>

                    </tr>
                    <tr>
                        <td>Product name: &nbsp&nbsp</td>
                        <td>{{this.product_name}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Category: </td>
                        <td>{{this.category_id}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Units </td>
                        <td>{{this.units_available}}</td>
                        <td>
                            <button class="btn btn-default register-submit-btn inventory-btn" data-id="{{this.id}}" data-id2="{{this.product_name}}"
                                style="margin: 0">Update inventory</button>
                        </td>
                    </tr>
                    <tr>

                        <tr>
                            <td>
                                <hr>
                            </td>
                            <td>
                                <hr>
                            </td>
                            <td>
                                <hr>
                            </td>
                        </tr>


                        {{/each}}
                </table>

                <div id="back-buttons">

                    <button type="button" class="btn btn-default register-submit-btn" id="back">Back</button>

                    <button type="button" class="btn btn-default register-submit-btn" id="back-manager-menu">Manager menu</button>


                </div>

            </div>

            <div id="update-inventory-box">

            </div>

        </div>

        <div class="col-md-4">
            <div id="narrow-search-box">

            </div>


        </div>
    </row>
</div>

<script>

    $(function () {

        $(".inventory-btn").on("click", function (event) {
            event.preventDefault();
            var id = $(this).data("id");
            var name = $(this).data("id2");

            var html = '<br /><h2>Update Inventory</h2><br /><p><strong><p>Update inventory for: </strong><br />Product id: ' + id + '<br />Product name: ' + name + '</p><hr>';
            html += '<form method="post" action="/manager/stockupdate">';
            html += '<table><tr>';
            html += '<div class="form-group form-inline">';
            html += '<td><label>New stock level: &nbsp&nbsp</label></td>';
            html += '<td><input type="text" class="form-control" placeholder="Number items" name="units" required></td>';
            html += '</div>';
            html += '<tr><td></td><td>';
            html += '<button type="submit" class="btn btn-default register-submit-btn" style="margin-top: 5px" name="id" value="' + id + '">Submit</button>';
            html += '</td></tr/></table>';
            html += '</form><hr>';


            $("#update-inventory-box").append(html);

            $("#product-display-all").hide();
            $("#update-inventory-box").show();

        });



        // back button event handler

        $("#back-manager-menu").on("click", function (event) {
            window.location = "/manager";

        })

         $("#back").on("click", function (event) {
            window.location = "/manager";

        })



    }); // end of funtion

</script>